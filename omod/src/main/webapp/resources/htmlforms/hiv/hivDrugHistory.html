<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
-->
<htmlform>
	<script type="text/javascript">
		jq(document).ready(function () {
			
			if (getValue('artReceived.value') == 1066) {
				jq('#artReceivedName :input').prop('disabled', true);
				jq('#artReceivedPlace :input').prop('disabled', true);
				jq('#otherArtReceivedPlace :input').prop('disabled', true);
			}
			else {
				jq('#artReceivedName :input').prop('disabled', false);
				jq('#artReceivedPlace :input').prop('disabled', false);
				jq('#otherArtReceivedPlace :input').prop('disabled', false);
			}
		
			jq("#artReceived input:radio").change(function() {
				if (getValue('artReceived.value') == 1066) {
					jq('#artReceivedName :input').prop('disabled', true);
					jq('#artReceivedPlace :input').prop('disabled', true);
					jq('#otherArtReceivedPlace :input').prop('disabled', true);
				}
				else {
					jq('#artReceivedName :input').prop('disabled', false);
					jq('#artReceivedPlace :input').prop('disabled', false);
					jq('#otherArtReceivedPlace :input').prop('disabled', false);
				}
			});
			
			if(getValue('artReceivedPlace.value')!=5622){
				jq('#otherArtReceivedPlace :input').prop('disabled', true);						
			}
			else{
				jq('#otherArtReceivedPlace :input').prop('disabled', false);
			}
			
			jq("#artReceivedPlace").change(function() {
				if(getValue('artReceivedPlace.value')!=5622){
					jq('#otherArtReceivedPlace :input').prop('disabled', true);						
				}
				else{
					jq('#otherArtReceivedPlace :input').prop('disabled', false);
				}
			});
			
			
			
			if (getValue('drug.value') == 1066) {
				jq('#drugName :input').prop('disabled', true);
				jq('#otherDrugName :input').prop('disabled', true);
			}
			else {
				jq('#drugName :input').prop('disabled', false);

				if(getValue('drugName.value')!=5622){
					jq('#otherDrugName :input').prop('disabled', true);						
				}
				else{
					jq('#otherDrugName :input').prop('disabled', false);
				}
			}
			
			jq("#drugName").change(function() {
				if(getValue('drugName.value')!=5622){
					jq('#otherDrugName :input').prop('disabled', true);						
				}
				else{
					jq('#otherDrugName :input').prop('disabled', false);
				}
			});
		
			jq("#drug input:radio").change(function() {
				if (getValue('drug.value') == 1066) {
					jq('#drugName :input').prop('disabled', true);
					jq('#otherDrugName :input').prop('disabled', true);	
				}
				else {
					jq('#drugName :input').prop('disabled', false);

					if(getValue('drugName.value')!=5622){
						jq('#otherDrugName :input').prop('disabled', true);						
					}
					else{
						jq('#otherDrugName :input').prop('disabled', false);
					}

				}
			});
			
			var sd = new Date(getValue('sDate1.value'));
			var ed = new Date(getValue('eDate1.value'));

			var diff = Math.floor(ed.getTime() - sd.getTime());
		    var day = 1000 * 60 * 60 * 24;
		    var days = Math.floor(diff/day);
		    var months = Math.floor(days/31);
		    if(sd!="Invalid Date" &amp;&amp; ed!="Invalid Date"){
		    	
				document.getElementById("w18").value = months;
				document.getElementById("w17").value = months;
			}
			else{
				document.getElementById("w18").value = 0;
				document.getElementById("w17").value = 0;
			}
		    
			jq("#sDate1 :input, #eDate1 :input").change(function() {
				var sd = new Date(getValue('sDate1.value'));
				var ed = new Date(getValue('eDate1.value'));

				var diff = Math.floor(ed.getTime() - sd.getTime());
			    var day = 1000 * 60 * 60 * 24;
			    var days = Math.floor(diff/day);
			    var months = Math.floor(days/31);
			    
			    if(sd!="Invalid Date" &amp;&amp; ed!="Invalid Date"){
			    	
					document.getElementById("w18").value = months;
					document.getElementById("w17").value = months;
				}
				else{
					document.getElementById("w18").value = 0;
					document.getElementById("w17").value = 0;
				}
				
			});
			
		});
	</script>

	<!-- Encounter date, provider and location are not relevant for CE forms -->
	<div style="display:none">
		<encounterDate id="encounter-date" />
		<encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" />
	</div>

	<div class="ke-form-content">
	<table>
		<tr>
			<td>Was ART received before ? </td>
			<td><obs  style="radio" conceptId="9b8f4989-833a-4aff-bb93-8b87a8b2c0a0" id="artReceived"/></td>
		</tr>
		<tr>
			<td>If yes, please specify</td>
			<td><obs conceptId="9c793547-81ed-4acd-a308-c13ee5dc467f" id="artReceivedName"/></td>
		</tr>
		<tr>
			<td>Place</td>
			<td><obs conceptId="cbcad523-81a0-4fd4-a7d9-567346d42875" id="artReceivedPlace"/></td>
			<td>if other:<obs conceptId="116138AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="otherArtReceivedPlace"/></td>
		</tr>		
		<tr>
			<td>Start Date</td>
			<td><obs conceptId="1190AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="sDate1"/></td>
		</tr>		
		<tr>
			<td>End Date</td>
			<td><obs conceptId="51e7342a-c0aa-4dea-9e1a-71a3dd1519fa" id="eDate1"/></td>
		</tr>		
		<tr>
			<td>Duration</td>
			<td><obs id="duration1" conceptId="24646d76-c162-4bcd-b611-4a34e3f98123"/></td>
		</tr>		
		<tr>
			<td colspan="2">
				<table id="table1" border="1" cellspacing="1" cellpadding="1" width="300">
					<thead>
						<tr>
							<th>Sr. No</th>
							<th>Drug Regimen</th>
						</tr>
					</thead>
					<tbody>
						<obsgroup groupingConceptId="5706AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
							<tr>
								<td>1</td>
								<td><obs conceptId="8759ede7-b637-4e8d-84f4-ab04d7f96bbe" style="autocomplete" answerClasses="Drug"/></td>
							</tr>
						</obsgroup>
						<obsgroup groupingConceptId="5706AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
							<tr>
								<td>2</td>
								<td><obs conceptId="8759ede7-b637-4e8d-84f4-ab04d7f96bbe" style="autocomplete" answerClasses="Drug"/></td>
							</tr>
						</obsgroup>
						<obsgroup groupingConceptId="5706AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
							<tr>
								<td>3</td>
								<td><obs conceptId="8759ede7-b637-4e8d-84f4-ab04d7f96bbe" style="autocomplete" answerClasses="Drug"/></td>
							</tr>
						</obsgroup>
						<obsgroup groupingConceptId="5706AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
							<tr>
								<td>4</td>
								<td><obs conceptId="8759ede7-b637-4e8d-84f4-ab04d7f96bbe" style="autocomplete" answerClasses="Drug"/></td>
							</tr>
						</obsgroup>
				</tbody>
				</table>
			</td>
		</tr>
		<tr>
			<td>Was anti - TB treatment received previously?* </td>
			<td><obs style="radio" conceptId="8923901b-1d42-44c4-abdf-8532fa8645d1" /></td>
		</tr>
		<tr>
			<td>Drug allergies? </td>
			<td><obs style="radio" conceptId="160643AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="drug"/></td>
		</tr>
		<tr>
			<td>If yes, name of drug </td>
			<td><obs conceptId="160558AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="drugName" /></td>
			<td>
				If other:<obs conceptId="4d988cca-a935-4e41-9722-1cb280dd4a63" id="otherDrugName" />
				
			</td>
		</tr>
	</table>

	</div>
	
	<div class="ke-form-footer">
		<submit successUrl=""/>
	</div>

</htmlform>