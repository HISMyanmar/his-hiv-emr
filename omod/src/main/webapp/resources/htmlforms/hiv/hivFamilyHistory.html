<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
-->

<htmlform>
<script type="text/javascript">
jq(document).ready(function(){
		
	if (getValue('status.value') == "135704" || getValue('status.value') == "1175") {
		jQuery('#tableFamily :input').prop('disabled', true);
	}
	else
	{
		jQuery('#tableFamily :input').prop('disabled', false);
	}
//====================================
	
	jq("#status :input").change(function(){
		if (getValue('status.value') == "135704" || getValue('status.value') == "1175") {
			jQuery('#tableFamily :input').prop('disabled', true);
		}
		else
		{
			jQuery('#tableFamily :input').prop('disabled', false);
		}
	});
	
	
	// show fields with data 
	fieldIndex = 8; 
	j=1;
	while(document.getElementById("w"+fieldIndex).value!="" &amp;&amp; j &lt; 8){
		jQuery('#'+j+'-toggleContainer').show();   
		fieldIndex=fieldIndex+14;
		j++;
	}
	
	//jQuery('#'+i+'-toggleContainer').show();
	$j('#1-removeEntry').remove();
	$j('#8-addEntry').remove();
	$j('#1-toggleContainer').show();
	
	$j('button.addEntry').on("click", function(){
		var correctedAddButtonId = parseFloat(this.id) + 1;      
		var contentAddId = "#" + correctedAddButtonId + "-toggleContainer";
		$j(contentAddId).toggle(true);      
		$j('#' + this.id).toggle(false); 
		$j('#' + parseFloat(this.id) + '-removeEntry').toggle(false);
		return false;});    
	 
	$j('button.removeEntry').on("click", function(){ 
		var correctedRemoveButtonId = parseFloat(this.id) - 1;
		var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer";
		$j(contentAddId).toggle(false);
		$j( ':input:not(:button)', contentAddId).val([]);
		$j('#' + correctedRemoveButtonId + '-addEntry').toggle(true);
		$j('#' + correctedRemoveButtonId + '-removeEntry').toggle(true);
		return false;
		});

//================
	
	if (document.getElementById("w106").value != "") {
	$j('#7-removeEntry').remove();
	$j('#7-addEntry').remove();
	}
		if (document.getElementById("w92").value != "") {
		$j('#6-removeEntry').remove();
		$j('#6-addEntry').remove();
		}
		
		if (document.getElementById("w78").value != "") {
			$j('#5-removeEntry').remove();
			$j('#5-addEntry').remove();
			}
				if (document.getElementById("w64").value != "") {
				$j('#4-removeEntry').remove();
				$j('#4-addEntry').remove();
				}
					if (document.getElementById("w50").value != "") {
					$j('#3-removeEntry').remove();
					$j('#3-addEntry').remove();
					}
						if (document.getElementById("w36").value != "") {
						$j('#2-removeEntry').remove();
						$j('#2-addEntry').remove();
						}
							if (document.getElementById("w22").value != "") {
							$j('#1-removeEntry').remove();
							$j('#1-addEntry').remove();
							}
			
//==============

	});
</script>

	<style>
		td, tr, table{
		  
			padding:3px;
		}
		select{
			padding:4px;
			border-radius: 2px;
			width:150px;
		}
		
		td, tr, table{
			padding:3px;
		}
		
		select{
			padding:4px;
			border-radius: 2px;
			width:50px;
		}
		
		th, td {
			border: 1px solid black;
			width: 157px !important;
		}

		input[type="text"] {
			width: 37px;
		}

		table {
			width: 100%;
		}

		tr > td > input[type=text] {
			width: 148px;
		}

		tr > td > center > select {
			width: 114px;
		}
		
		#marital-status-table {
		width: 29%;
		}
		
		#marital-status-table select {
		width: 218px !important;
		}
		
		select {
		width: 116px !important;
		}
		
		#add, #remove {
		border: none;
		background-color: white;	
		}
    </style>

	<!-- Encounter date, provider and location are not relevant for CE forms -->
	<div style="display:none">
		<encounterDate id="encounter-date" showTime="true"/>
		<encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" />
	</div>
	
	
	<div class="ke-form-content" style="select {   width: 40%;   padding: 2px;}" >
				
				<br/>
				<table style="background-color: #c7d8a7" id="marital-status-table">
					<tr>
						<td><strong>Marital Status?</strong></td>
						<td><obs id="status" conceptId="1054AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></td>
					</tr>
				</table>
				<br/>
				<div id="tableFamily">
				<table  width="80%" style="background-color: #e8efdc" border="1" align="center"  cellspacing="10">
					<tr>
						<th width="">Name of the Spouse/Children</th>
						<th><center>Relationship</center></th>
						<th><center>Age</center></th>
						<th><center>Gender</center></th>
						<th><center>HIV Result(+/-/Unknown)</center></th>
						<th><center>ART(Y/N)</center></th>
						<th id="add"><center></center></th>
					</tr>
					<repeat>
						<template>
							<obsgroup groupingConceptId="160593AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
								<div id="{n}-toggleContainer" style="display:none;">
									<table>
										<tr  style="border:1px solid black">
											<td><obs conceptId="2319ebba-7e1e-47e9-9508-d0f6345af70d" labetText=" " size="30"/></td>
											<td><center><obs conceptId="baa27ac2-7bf7-4fda-9631-62af8c981f1e"  answerLabel="Relation" style="dropdown"/></center></td>
											<td><center><obs conceptId="160617AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabel="Age"/><obs conceptId="1732AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  style="dropdown"  /></center> </td>
											<td width="200px"><center><obs conceptId="1533AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></center></td>
											<td><center><obs conceptId="1169AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" /></center></td>
											<td><center><obs conceptId="72ef6301-fbbb-4c44-8e5f-ec27f33afa22" /></center></td>
											<td><button id="{n}-addEntry" class="addEntry">Add</button><button id="{n}-removeEntry" class="removeEntry">Remove</button></td> 
										</tr>
									</table>	
								</div>
							</obsgroup>	
						</template>
						<render n="1" concept=" "/>
						<render n="2" concept=" "/>
						<render n="3" concept=" "/>
						<render n="4" concept=" "/>
						<render n="5" concept=" "/>
						<render n="6" concept=" "/>
						<render n="7" concept=" "/>
						<render n="8" concept=" "/>
					</repeat>	

				</table>
				</div>
	</div>

	<div class="ke-form-footer">
		<submit />
	</div>

</htmlform>